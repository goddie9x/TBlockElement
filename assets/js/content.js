let lastElement,isEnableExtension=!0,isQuickSelect=!1,tempElementForMenuContextHandle,getListUrlDisableExtensionInfoPromise=getFromChromeStorage("disableExtensionForUrl"),pickerPanel,classNameUsable=["prevent-click","t-spec-block-prevent-scroll","t-spec-block-hover-blur"],originUrl=window.location.host;const selectTypes=["interval","timeout","onscroll","onload"];function saveToChromeStorage({key:a,value:b}){return new Promise((c,d)=>chrome.storage.sync.set({[a]:b},()=>chrome.runtime.lastError?d(chrome.runtime.lastError.message):c(()=>{console.log(`${a} saved`)})))}function replaceStringWithMultipleValues(b,a,c){let d=b;return Array.isArray(c)?a.forEach((a,b)=>{d=d.replace(a,c[b])}):a.forEach(a=>{d=d.replace(a,c)}),d}function getFromChromeStorage(a){return new Promise((b,c)=>chrome.storage.sync.get(a,a=>chrome.runtime.lastError?c(chrome.runtime.lastError.message):b(a)))}function setAttributes(b,c){try{for(var d in c){let a=c[d];"object"==typeof a?setAttributes(b,a):b.setAttribute(d,a)}}catch(e){console.log(e)}}function addMultipleClass(c,a){try{a.forEach(a=>c.classList.add(a))}catch(b){console.log(b)}}function removeMultipleClass(c,a){try{a.forEach(a=>c.classList.remove(a))}catch(b){console.log(b)}}function showAlertMessage({title:c,message:d,type:e="info",buttons:b=[],onClose:g,timeOut:f=3e3}){let a=document.createElement("div");addMultipleClass(a,["alert","alert-"+e,"fade","show","t-spec-block-alert"]),a.innerHTML=`
        <h4>${c}</h4>
        <p>${d}</p>
    `,b&&b.forEach(c=>{let b=document.createElement("button");b.innerHTML=c.text,b.addEventListener("click",c.onClick),a.appendChild(b)}),document.body.appendChild(a),setTimeout(()=>{a.remove(),g&&g()},f)}function toggleClassWithCondition(c,a,b){b?a.forEach(a=>{c.classList.add(a)}):a.forEach(a=>{c.classList.remove(a)})}function setValueForGeneralSettings(a){return getFromChromeStorage("generalSetings").then(({generalSetings:b})=>{for(let c in b||(b={}),a)b[c]=a[c];return saveToChromeStorage({key:"generalSetings",value:b})})}function createRulesRemove(h,{selector:e,method:f,timeInterval:b,amountLoop:c},g,d){b=b||"",c=c||"";if(!d){let a=new Date;d=a.getHours()+":"+a.getMinutes()+" "+a.getDay()+"/"+a.getMonth()+"/"+a.getFullYear()}let i=e+"|"+f+"|"+b+"|"+c+"|"+d;return("rulesRemoveElement"==g?getFromChromeStorage("rulesRemoveElement"):getFromChromeStorage("rulesRemoveSelector")).then(c=>{let a=c[g];if(a){let b=a[h];b?-1==b.indexOf(i)&&(b+=","+i):b=i,a[h]=b}else(a={})[h]=i;return saveToChromeStorage({key:g,value:a})})}function getRulesRemove(a){return("rulesRemoveElement"==a?getFromChromeStorage("rulesRemoveElement"):getFromChromeStorage("rulesRemoveSelector")).then(b=>b[a])}function updateOrDeleteRulesRemove(f,{selector:c,method:d,timeInterval:a,amountLoop:b},e,g){a=a||"",b=b||"";let h=c+"|"+d+"|"+a+"|"+b;return("rulesRemoveElement"==e?getFromChromeStorage("rulesRemoveElement"):getFromChromeStorage("rulesRemoveSelector")).then(i=>{let b=i[e];if(b){let a=b[f];if(a){if(a){let d=a.split(",");if(a=(d=d.filter(function(a){return!a.includes(h)})).join(","),g){let c=new Date;a+=","+h+"|"+(c.getHours()+":"+c.getMinutes()+" "+c.getDay()+"/"+c.getMonth()+"/"+c.getFullYear())}}b[f]=a}a||delete b[f]}return saveToChromeStorage({key:e,value:b})})}function createMultipleRulesRemove(b,a){return("rulesRemoveElement"==a?getFromChromeStorage("rulesRemoveElement"):getFromChromeStorage("rulesRemoveSelector")).then(c=>{let d=c[a];return b.forEach(a=>{let c=a.host,b=d[c];b?-1==b.indexOf(a.ruleInfo)&&(b+=","+a.ruleInfo):d[c]=a.ruleInfo}),saveToChromeStorage({key:a,value:d})})}getListUrlDisableExtensionInfoPromise.then(({disableExtensionForUrl:a})=>{isEnableExtension=!a||!a.includes(originUrl)});let handledElements={elementRemovedSelector:[],elementRemoved:[]};function startSelect(b){let a=b.target;try{a.className&&a.className.includes("t-spec-block")||(a.classList.add("t-spec-block-hover-blur"),a.addEventListener("click",handleClickElement),lastElement&&(lastElement.classList.remove("t-spec-block-hover-blur"),lastElement.removeEventListener("click",handleClickElement)),lastElement=a)}catch(c){showAlertMessage({title:"error",type:"danger",message:"Somthing went wrong, please try again later."})}}function handleClickElement(a){a.preventDefault(),a.stopPropagation(),startBlockSelectedElement(a.target)}function startBlockSelectedElement(a){document.body.classList.add("prevent-click"),a.removeEventListener("click",handleClickElement);let b=getAllRelativeElementOfCurrentElement(a);pickerPanel?pickerPanel.setElements(b):pickerPanel=new PickerPanel(b),document.removeEventListener("mouseover",startSelect),isQuickSelect?(pickerPanel.quickSelect(),isQuickSelect=!1):pickerPanel.show()}function getAllRelativeElementOfCurrentElement(a){if(!a)return[];let b=[a];for(;a.parentElement&&"HTML"!==a.parentElement.tagName;)(""!=(a=a.parentElement).id||""!=a.className||"BODY"==a.tagName||"HTML"==a.tagName)&&b.push(a);return b}function startSelectElement(){document.body.classList.remove("prevent-click"),document.addEventListener("mouseover",startSelect)}function stopSelectElement(){lastElement&&(lastElement.classList.remove("t-spec-block-hover-blur"),lastElement.removeEventListener("click",handleClickElement)),document.removeEventListener("mouseover",startSelect)}chrome.runtime.onMessage.addListener((a,b,c)=>{switch(a.name){case"quick-select":isQuickSelect=!0,startSelectElement();break;case"start-select":startSelectElement();break;case"disable-blocking":isEnableExtension=!1,pickerPanel&&pickerPanel.quit(),window.removeEventListener("load",startBlock),restoreHandledElements();break;case"enable-blocking":isEnableExtension=!0,window.addEventListener("load",startBlock);break;case"check-content-loaded":sendMessageToPopup({name:"loaded-content"});break;case"unblock-copy":case"unblock-scroll":case"restart-page":window.location.reload();break;case"updateRules":startBlock();case"start-block-by-menucontext":tempElementForMenuContextHandle?startBlockSelectedElement(tempElementForMenuContextHandle):showAlertMessage({title:"error",type:"danger",message:"Please wait for the page to load completely."})}});class PickerPanel{constructor(a){this.elements=a,this.isDragging=!1,this.targetElementIndex=0,this.isPreview=!1,this.maxElementTagetParentLevel=a.length-1,this.queryLevel=0,this.selectTypeValue="interval",this.container=document.createElement("div"),this.header=document.createElement("textarea"),this.rangers=document.createElement("div"),this.buttonList=document.createElement("div"),this.listItemRelativeWrapper=document.createElement("div"),this.listItemRelativeTitle=document.createElement("div"),this.listItemRelative=document.createElement("div"),this.selectParentElementRanger=document.createElement("input"),this.queryLevelRanger=document.createElement("input"),this.previewBtn=document.createElement("button"),this.createRemoveSelectorBtn=document.createElement("button"),this.createRemoveElementBtn=document.createElement("button"),this.pickBtn=document.createElement("button"),this.quitBtn=document.createElement("button"),this.optionsWrapper=document.createElement("div"),this.optionsInputsWrapper=document.createElement("div"),this.selectType=document.createElement("select"),this.inputTimeInterval=document.createElement("input"),this.inputAmountLoop=document.createElement("input"),this.minimizeBtn=document.createElement("div"),this.miniMenu=document.createElement("div"),this.expandBtn=document.createElement("div"),this.dragBtn=document.createElement("div"),this.container.setAttribute("class","t-spec-block-wrapper"),this.header.setAttribute("class","t-spec-block-header"),this.rangers.setAttribute("class","t-spec-block-rangers"),this.buttonList.setAttribute("class","t-spec-block-button-list"),this.listItemRelativeWrapper.setAttribute("class","t-spec-block-list-item-relative-wrapper"),this.optionsWrapper.setAttribute("class","t-spec-block-options-wrapper"),this.optionsWrapper.setAttribute("draggable","true"),this.optionsInputsWrapper.setAttribute("class","t-spec-block-options-inputs-wrapper col-12 p-0 d-flex justify-content-around"),this.queryLevelRanger.value=0,this.container.appendChild(this.minimizeBtn),this.container.appendChild(this.header),this.container.appendChild(this.rangers),this.container.appendChild(this.buttonList),this.container.appendChild(this.listItemRelativeWrapper),document.body.appendChild(this.container),document.body.addEventListener("dragover",enableDragOnElemetn),this.init()}setElements(a){this.elements=a,this.targetElementIndex=0,this.queryLevel=0,this.queryLevelRanger.value=0,this.maxElementTagetParentLevel=this.elements.length-1,this.setSelectValue(),this.renderListItemRelative()}init(){this.initHeader(),this.initRangers(),this.initButtonList(),this.initlistItemRelativeWrapper(),this.initOptionsWrapper(),this.initMiniMenu()}initHeader(){this.header.addEventListener("input",b=>{try{let c=b.target.value,a=document.querySelector(c);if(a){if(this.elements.includes(a)){let d=this.elements.indexOf(a);this.queryLevel=1,this.queryLevelRanger.value=1,this.setSelectIndex(d),this.header.value=c}else{let e=getAllRelativeElementOfCurrentElement(b.target);this.setElements(e)}}}catch(f){showAlertMessage({title:"Error",type:"danger",message:"Invalid selector"}),console.log(f)}}),this.setSelectValue()}initRangers(){this.selectParentElementRanger.setAttribute("class","t-spec-block-range form-range mx-1"),this.selectParentElementRanger.setAttribute("data-bs-toggle","tooltip"),this.selectParentElementRanger.setAttribute("data-bs-tooltip","Select element"),this.queryLevelRanger.setAttribute("class","t-spec-block-range form-range mx-1"),this.queryLevelRanger.setAttribute("data-bs-toggle","tooltip"),this.queryLevelRanger.setAttribute("data-bs-tooltip","Query level"),this.selectParentElementRanger.type="range",this.queryLevelRanger.type="range",this.selectParentElementRanger.min=0,this.selectParentElementRanger.max=this.maxElementTagetParentLevel,this.queryLevelRanger.min=1,this.queryLevelRanger.max=this.queryLevel,this.selectParentElementRanger.value=this.targetElementIndex,this.queryLevelRanger.value=this.queryLevel,this.selectParentElementRanger.addEventListener("change",b=>{let a=b.target.value;this.maxElementTagetParentLevel=this.elements.length-a,this.queryLevel=1,this.selectType=1,this.setSelectIndex(a)}),this.queryLevelRanger.addEventListener("change",a=>{this.queryLevel=a.target.value,this.isChangeQueryLevel=!0,this.setSelectValue()}),this.rangers.appendChild(this.selectParentElementRanger),this.rangers.appendChild(this.queryLevelRanger)}initButtonList(){this.previewBtn.setAttribute("class","btn btn-outline-secondary t-spec-block-btn"),this.pickBtn.setAttribute("class","btn btn-outline-secondary t-spec-block-btn"),this.quitBtn.setAttribute("class","btn btn-outline-secondary t-spec-block-btn"),this.previewBtn.innerText="Preview",this.pickBtn.innerText="Pick",this.pickBtn.setAttribute("data-bs-toggle","tooltip"),this.pickBtn.setAttribute("data-bs-tooltip","Re pick element"),this.quitBtn.innerText="Quit",this.initEventHandlerForButtons()}initEventHandlerForButtons(){this.previewBtn.addEventListener("click",()=>{this.isPreview=!this.isPreview,this.preview()}),this.pickBtn.addEventListener("click",()=>{this.pick()}),this.quitBtn.addEventListener("click",()=>{this.quit()}),this.buttonList.appendChild(this.previewBtn),this.buttonList.appendChild(this.pickBtn),this.buttonList.appendChild(this.quitBtn)}initlistItemRelativeWrapper(){this.listItemRelativeTitle.classList.add("t-spec-block-list-item-relative-title"),this.listItemRelativeTitle.innerText="Relative filter",this.listItemRelativeWrapper.appendChild(this.listItemRelativeTitle),this.listItemRelativeWrapper.appendChild(this.listItemRelative),this.renderListItemRelative()}initOptionsWrapper(){this.selectType.setAttribute("class","t-spec-block-select-type form-select-2 col-4"),this.inputTimeInterval.setAttribute("class","form-control-2 t-spec-block-input-time-interval col-3"),this.inputTimeInterval.setAttribute("placeholder","Time interval"),this.inputTimeInterval.type="number",this.inputAmountLoop.setAttribute("class","form-control-2 t-spec-block-input-amount-loop col-3"),this.inputAmountLoop.setAttribute("placeholder","Amount loop"),this.inputAmountLoop.type="number",this.createRemoveSelectorBtn.setAttribute("class","t-spec-block-create-remove-selector-btn col-5 btn btn-outline-secondary"),this.createRemoveElementBtn.setAttribute("class","t-spec-block-create-remove-element-btn col-5 btn btn-outline-secondary"),this.createRemoveSelectorBtn.innerText="Create remove Selector",this.createRemoveSelectorBtn.setAttribute("data-bs-toggle","tooltip"),this.createRemoveSelectorBtn.setAttribute("data-bs-tooltip","Create rule just remove selector"),this.createRemoveElementBtn.innerText="Create remove element",this.createRemoveElementBtn.setAttribute("data-bs-toggle","tooltip"),this.createRemoveElementBtn.setAttribute("data-bs-tooltip","Create rule remove element"),selectTypes.forEach(b=>{let a=document.createElement("option");a.innerText=b,a.value=b,this.selectType.appendChild(a)}),this.optionsInputsWrapper.appendChild(this.selectType),this.optionsInputsWrapper.appendChild(this.inputTimeInterval),this.optionsInputsWrapper.appendChild(this.inputAmountLoop),this.optionsWrapper.appendChild(this.optionsInputsWrapper),this.optionsWrapper.appendChild(this.createRemoveSelectorBtn),this.optionsWrapper.appendChild(this.createRemoveElementBtn),this.initEventHandlerForOptionsWrapper()}initEventHandlerForOptionsWrapper(){this.optionsWrapper.addEventListener("click",a=>{a.preventDefault()}),this.optionsWrapper.addEventListener("drag",this.optionsWrapperDrag),this.optionsWrapper.addEventListener("dragend",a=>{document.body.classList.add("prevent-click")}),this.optionsWrapper.addEventListener("click",a=>{a.preventDefault()}),this.selectType.addEventListener("change",a=>{switch(this.selectTypeValue=a.target.value,this.selectTypeValue){case"interval":this.inputTimeInterval.classList.remove("d-none"),this.inputTimeInterval.setAttribute("placeholder","Time interval"),this.inputAmountLoop.classList.remove("d-none");break;case"timeout":this.inputTimeInterval.classList.remove("d-none"),this.inputTimeInterval.setAttribute("placeholder","Timeout"),this.inputAmountLoop.classList.add("d-none");break;default:this.inputTimeInterval.classList.add("d-none"),this.inputAmountLoop.classList.add("d-none")}}),this.inputAmountLoop.addEventListener("change",a=>{this.amountLoop=a.target.value}),this.inputTimeInterval.addEventListener("change",a=>{this.timeInterval=a.target.value}),this.createRemoveSelectorBtn.addEventListener("click",()=>{this.createRemoveSelector()}),this.createRemoveElementBtn.addEventListener("click",()=>{this.createRemoveElement()})}initMiniMenu(){this.miniMenu.setAttribute("class","t-spec-block-mini-menu d-none"),this.expandBtn.setAttribute("class","t-spec-block-mini-menu-expand-btn btn"),this.dragBtn.setAttribute("class","t-spec-block-mini-menu-drag-btn btn"),this.minimizeBtn.setAttribute("class","t-spec-block-mini-menu-minimize-btn btn"),this.expandBtn.innerHTML='<i class="fa-solid fa-arrows-maximize"></i>',this.expandBtn.addEventListener("click",()=>{this.show()}),this.dragBtn.innerHTML='<i class="fa-solid fa-grip"></i>',this.dragBtn.setAttribute("draggable","true"),this.dragBtn.addEventListener("drag",a=>{document.body.classList.remove("prevent-click"),this.move(a)}),this.dragBtn.addEventListener("dragend",a=>{document.body.classList.add("prevent-click")}),this.minimizeBtn.innerHTML='<i class="fa-solid fa-minus"></i>',this.minimizeBtn.addEventListener("click",()=>{this.hide()}),this.miniMenu.appendChild(this.expandBtn),this.miniMenu.appendChild(this.dragBtn),document.body.appendChild(this.miniMenu)}renderListItemRelative(){this.listItemRelative.innerHTML="",this.elements.forEach((b,c)=>{let a=document.createElement("div");a.setAttribute("class","t-spec-block-item-relative"),a.innerText=this.getSelectorByQueryLevel(b,c==this.targetElementIndex),a.addEventListener("click",()=>{this.selectParentElementRanger.value=c,this.selectParentElementRanger.dispatchEvent(new Event("change"))}),this.listItemRelative.appendChild(a)})}move(c){let b=window.innerWidth-c.clientX,a=window.innerHeight-c.clientY;b>window.innerWidth-100&&(b=window.innerWidth-100),a>window.innerHeight-100&&(a=window.innerHeight-100),b<0&&(b=0),a<0&&(a=0),a<3*window.innerHeight/10?this.minimizeBtn.style.top="5px":this.minimizeBtn.style.top="95%";let d=b-this.container.clientWidth,e=a-this.container.clientHeight;this.container.style.right=d+"px",this.container.style.bottom=e+"px",this.miniMenu.style.right=d+"px",this.miniMenu.style.bottom=e+"px"}optionsWrapperDrag(d){let c=d.target,a=d.clientX-c.offsetWidth/2,b=d.clientY-c.offsetHeight/2;a<0&&(a=0),b<0&&(b=0),a>window.innerWidth-100&&(a=window.innerWidth-100),b>window.innerHeight-100&&(b=window.innerHeight-100),c.style.left=a+"px",c.style.top=b+"px"}getSelectorByQueryLevel(a,g=!1){let c=a.classList,b="";if(c.length>0)for(let d=0;d<c.length;d++)classNameUsable.includes(c[d])||(b+="."+c[d]);if(a.id&&(b+=`#${a.id}`),""===b)do{let e=a.tagName.toLowerCase();if("body"!=e&&"html"!=e){let f=[...a.parentElement.children].indexOf(a);f>=0&&(e+=`:nth-child(${f+1})`)}if(b=e+" "+b,!(a=a.parentElement)||""!=replaceStringWithMultipleValues(a.className,classNameUsable,"")||""!=a.id)break}while(g)return b}getArrayOfParentsFullSelector(){let b=[],c=this.elements.length-1;for(let a=this.targetElementIndex;a<c;a++)b.push(this.getSelectorByQueryLevel(this.elements[a],a==this.targetElementIndex));return b}setSelectValue(){let a=this.elements.length-this.targetElementIndex-1;this.queryLevelRanger.max=this.maxElementTagetParentLevel,this.isChangeQueryLevel?this.isChangeQueryLevel=!1:this.queryLevel=1;let b=this.elements[this.targetElementIndex],g=this.getArrayOfParentsFullSelector().reverse(),c="",f=document.body;if(a>0){let d=a-this.queryLevel-1;d<0&&(d=0,this.queryLevel=a);for(let e=d;e<a;e++)c+=g[e]+" "}0==a&&(c=this.getSelectorByQueryLevel(b)),b.removeEventListener("click",handleClickElement),f.classList.add("t-spec-block-prevent-scroll"),lastElement&&(lastElement.classList.remove("t-spec-block-hover-blur"),lastElement.parentElement&&lastElement.parentElement.classList.remove("t-spec-block-p-relative")),this.header.value=c,this.optionsWrapper.remove(),b.classList.add("t-spec-block-hover-blur"),f.appendChild(this.optionsWrapper),lastElement=b}setSelectIndex(a){this.targetElementIndex=a,this.setSelectValue()}getHeaderValue(){return this.header.value.replace(".t-spec-block-hover-blur","")}preview(){this.isPreview?(lastElement.classList.add("d-none"),this.previewBtn.classList.add("active")):(lastElement.classList.remove("d-none"),this.previewBtn.classList.remove("active"))}show(){this.container.classList.remove("d-none"),this.miniMenu.classList.add("d-none")}hide(){document.body.classList.remove("t-spec-block-prevent-scroll"),this.container.classList.add("d-none"),this.miniMenu.classList.remove("d-none")}quickSelect(){this.hide(),this.quit(),getFromChromeStorage("generalSetings").then(({generalSetings:b})=>{b||(b={});let{isEnableDialog:d,quickRemoveType:e,selectorOptions:c}=b;if(!d){let a=c?c.split("|"):[];this.miniMenu.classList.add("d-none"),this.optionsWrapper.remove(),this.selectTypeValue=a[1]?a[1]:"interval",this.timeInterval=a[2]?a[2]:"1000",this.amountLoop=a[3]?a[3]:"7","rulesRemoveSelector"==e?this.createRemoveSelector():this.createRemoveElement()}})}pick(){this.hide(),this.optionsWrapper.remove(),startSelectElement(),this.miniMenu.classList.remove("d-none")}quit(){this.hide(),this.optionsWrapper.remove(),this.miniMenu.classList.add("d-none"),this.elements.forEach(a=>{a.removeEventListener("click",handleClickElement)}),document.body.removeEventListener("dragover",enableDragOnElemetn),document.body.classList.remove("prevent-click"),stopSelectElement()}createRemoveSelector(){createRulesRemove(originUrl,{selector:this.getHeaderValue(),method:this.selectTypeValue,timeInterval:this.timeInterval,amountLoop:this.amountLoop},"rulesRemoveSelector").then(()=>{this.hide(),this.quit(),sendMessageToPopup({name:"updateRules",selectorType:"rulesRemoveSelector"}),startBlock()})}createRemoveElement(){createRulesRemove(originUrl,{selector:this.getHeaderValue(),method:this.selectTypeValue,timeInterval:this.timeInterval,amountLoop:this.amountLoop},"rulesRemoveElement").then(()=>{this.hide(),this.quit(),sendMessageToPopup({name:"updateRules",selectorType:"rulesRemoveElement"}),startBlock()})}}function startBlock(){sendMessageToPopup({name:"loaded-content"});let a=window.location.host;getRulesRemove("rulesRemoveSelector").then(b=>{b&&b[a]&&handleRemoveDomOption(b[a].split(","),removeSelectorForElement)}),getRulesRemove("rulesRemoveElement").then(b=>{b&&b[a]&&handleRemoveDomOption(b[a].split(","),removeElement)}),getFromChromeStorage("generalSetings").then(({generalSetings:a})=>{a||(a={}),a.isEnableAutoUnblockCopy&&enableCopy(a.unblockCopyLevel),a.isEnableAutoUnblockScroll&&enableScroll(a.unblockScrollLevel)})}function removeElement(c){try{let a=document.querySelector(c);if(a){let b=a.parentElement,d=[...b.children].indexOf(a);handledElements.elementRemoved.push({element:a,parent:b,curIndexElOfParent:d}),a.remove()}}catch(e){console.log(e)}}function removeSelectorForElement(d,e){try{let a=document.querySelector(d);if(a){let c=a.classList,b=a.id,f=a.className;handledElements.elementRemovedSelector.find(a=>a.id===b&&a.className===f)||handledElements.elementRemovedSelector.push({element:a,id:b,className:f}),c.length>0&&c.forEach(b=>{e.includes(b)&&a.classList.remove(b)}),b&&e.includes(b)&&(a.id="")}}catch(g){console.log(g)}}function handleRemoveDomOption(a,b){a.forEach(d=>{let a=d.split("|"),e=a[0],f=a[1]||"interval",c=a[2]||2e3,h=a[3]||6,i=0,g;switch(f){case"interval":b(e,a),g=setInterval(()=>{i>=h||!isEnableExtension?clearInterval(g):b(e,e),i++},c);break;case"timeout":setTimeout(()=>{isEnableExtension&&b(e,a)},c);break;case"onscroll":window.addEventListener("scroll",()=>{isEnableExtension&&b(e,a)});break;case"onload":window.addEventListener("onload",()=>{isEnableExtension&&b(e,a)})}})}function enableDragOnElemetn(a){a.preventDefault()}function restoreHandledElements(){handledElements.elementRemoved.forEach(({element:b,parent:a,curIndexElOfParent:c})=>{a.insertBefore(b,a.children[c])}),handledElements.elementRemovedSelector.forEach(({element:a,id:b,className:c})=>{a.id=b,a.className=c})}function enableScroll(a){let b=0,c=setInterval(()=>{if(b++,isEnableExtension&&b<7)try{if(document.body.style.overflow="auto",1==a)return;window.addEventListener("scroll",()=>{})}catch(d){}else clearInterval(c)},1e3)}function restoreDefaultCopyEvent(){let a="";window.getSelection?a=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(a=document.selection.createRange().text),navigator.clipboard.writeText(a)}function restoreDefaultSelectText(){return!0}function enableCopy(a){let b=0,c=setInterval(()=>{b++,isEnableExtension&&b<7?document.querySelectorAll("*").forEach(b=>{b.addEventListener("click",restoreDefaultSelectText),1!=a&&(b.addEventListener("mousedown",restoreDefaultSelectText),2!=a)&&(b.addEventListener("selectstart",restoreDefaultSelectText),3!=a&&(b.addEventListener("copy",restoreDefaultCopyEvent),4!=a&&setAttributes(b,{contentEditable:!0,style:{webkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text",userSelect:"text"}})))}):clearInterval(c)},2e3)}function sendMessageToPopup(a,b){chrome.runtime.sendMessage({...a},function(a){chrome.runtime.lastError,b&&b(a)})}window.addEventListener("load",()=>{let a=document.createElement("style");a.type="text/css",a.textContent=`
        @font-face {
            font-family: 'Font Awesome 6 Pro';
            font-style: normal;
            font-weight: 300;
            font-display: block;
            src: url("${chrome.runtime.getURL("assets/webfonts/fa-light-300.woff2")}") format("woff2"), url("${chrome.runtime.getURL("assets/webfonts/fa-light-300.woff")}") format("woff"), url("${chrome.runtime.getURL("assets/webfonts/fa-light-300.ttf")}") format("truetype");
        }
        @font-face {
            font-family: 'Font Awesome 6 Pro';
            font-style: normal;
            font-weight: 400;
            font-display: block;
            src: url("${chrome.runtime.getURL("assets/webfonts/fa-regular-400.woff2")}") format("woff2"), url("${chrome.runtime.getURL("assets/webfonts/fa-regular-400.woff")}") format("woff"), url("${chrome.runtime.getURL("assets/webfonts/fa-regular-400.ttf")}") format("truetype");
        }
        @font-face {
            font-family: 'Font Awesome 6 Pro';
            font-style: normal;
            font-weight: 900;
            font-display: block;
            src: url("${chrome.runtime.getURL("assets/webfonts/fa-solid-900.woff2")}") format("woff2"), url("${chrome.runtime.getURL("assets/webfonts/fa-solid-900.woff")}") format("woff"), url("${chrome.runtime.getURL("assets/webfonts/fa-solid-900.ttf")}") format("truetype");
        }
        @font-face {
            font-family: 'Font Awesome 6 Pro';
            font-style: normal;
            font-weight: 100;
            font-display: block;
            src: url("${chrome.runtime.getURL("assets/webfonts/fa-thin-100.woff2")}") format("woff2"), url("${chrome.runtime.getURL("assets/webfonts/fa-thin-100.woff")}") format("woff"), url("${chrome.runtime.getURL("assets/webfonts/fa-thin-100.ttf")}") format("truetype");
        }
        @font-face {
            font-family: 'Font Awesome 6 Brands';
            font-style: normal;
            font-weight: 400;
            font-display: block;
            src: url("${chrome.runtime.getURL("assets/webfonts/fa-brands-400.woff2")}") format("woff2"), url("${chrome.runtime.getURL("assets/webfonts/fa-brands-400.woff")}") format("woff"), url("${chrome.runtime.getURL("assets/webfonts/fa-brands-400.ttf")}") format("truetype");
        }
        @font-face {
            font-family: 'Font Awesome 6 Duotone';
            font-style: normal;
            font-weight: 900;
            font-display: block;
            src: url("${chrome.runtime.getURL("assets/webfonts/fa-duotone-900.woff2")}") format("woff2"), url("${chrome.runtime.getURL("assets/webfonts/fa-duotone-900.woff")}") format("woff"), url("${chrome.runtime.getURL("assets/webfonts/fa-duotone-900.ttf")}") format("truetype");
        }
        `,document.head.appendChild(a),startBlock()}),document.addEventListener("mousedown",a=>{tempElementForMenuContextHandle=a.target})